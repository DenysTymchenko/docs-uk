# Teleport {#teleport}

 <VueSchoolLink href="https://vueschool.io/lessons/vue-3-teleport" title="Безкоштовний урок телепортації Vue.js"/>

`<Teleport>` — це вбудований компонент, який дозволяє нам "телепортувати" частину шаблону компонента у вузол DOM, який існує поза ієрархією DOM цього компонента.

## Основне використання {#basic-usage}

Іноді ми можемо зіткнутися з таким сценарієм: частина шаблону компонента логічно належить до нього, але з візуальної точки зору вона повинна відображатися в іншому місці DOM, поза програмою Vue.

Найпоширенішим прикладом цього є створення повноекранного режиму. В ідеалі ми хочемо, щоб кнопка модального вікна та саме вікно жили в одному компоненті, оскільки вони обидва пов’язані зі станом відкриття/закриття модального вікна. Але це означає, що модальне вікно відображатиметься поруч із кнопкою, глибоко вкладеною в ієрархію DOM програми. Це може створити деякі складнощі під час позиціонування вікна через CSS.

Розглянемо наступну HTML-структуру.

```vue-html
<div class="outer">
  <h3>Приклад телепортації</h3>
  <div>
    <MyModal />
  </div>
</div>
```

А ось реалізація `<MyModal>`:

<div class="composition-api">

```vue
<script setup>
import { ref } from 'vue'

const open = ref(false)
</script>

<template>
  <button @click="open = true">Відкрити модальне вікно</button>

  <div v-if="open" class="modal">
    <p>Привіт з модального вікна!</p>
    <button @click="open = false">Закрити</button>
  </div>
</template>

<style scoped>
.modal {
  position: fixed;
  z-index: 999;
  top: 20%;
  left: 50%;
  width: 300px;
  margin-left: -150px;
}
</style>
```

</div>
<div class="options-api">

```vue
<script>
export default {
  data() {
    return {
      open: false
    }
  }
}
</script>

<template>
  <button @click="open = true">Відкрити модальне вікно</button>

  <div v-if="open" class="modal">
    <p>Привіт з модального вікна!</p>
    <button @click="open = false">Закрити</button>
  </div>
</template>

<style scoped>
.modal {
  position: fixed;
  z-index: 999;
  top: 20%;
  left: 50%;
  width: 300px;
  margin-left: -150px;
}
</style>
```

</div>

Компонент містить `<button>` для ініціювання відкриття модального вікна та `<div>` з класом `.modal`, який має зміст та кнопку для самозакриття.

Під час використання цього компонента в початковій HTML-структурі існує низка потенційних проблем:

- `position: fixed` лише розміщує елемент відносно вікна перегляду, якщо жоден елемент-предок не має властивостей `transform`, `perspective` або `filter`. Якщо, наприклад, ми маємо намір анімувати предка `<div class="outer">` за допомогою перетворення CSS, це порушить макет!

- `z-індекс` модального вікна обмежений елементами, що містяться в ньому. Якщо є інший елемент, який збігається з `<div class="outer">` і має вищий `z-індекс`, він покриватиме наше вікно.

`<Teleport>` забезпечує простий спосіб обійти це, дозволяючи нам вийти за межі вкладеної структури DOM. Змінимо `<MyModal>` на використання `<Teleport>`:

```vue-html{3,8}
<button @click="open = true">Відкрити модальне вікно</button>

<Teleport to="body">
  <div v-if="open" class="modal">
    <p>Привіт з модального вікна!</p>
    <button @click="open = false">Закрити</button>
  </div>
</Teleport>
```

Ціль `to` для `<Teleport>` очікує рядок CSS селектору або фактичний вузол DOM. Тут ми, по суті, кажемо Vue «**телепортувати** цей фрагмент шаблону **до** тегу **`body`**».

Ви можете натиснути кнопку нижче та перевірити тег `<body>` за допомогою інструментів розробника вашого браузера:

<script setup>
let open = $ref(false)
</script>

<div class="demo">
  <button @click="open = true">Відкрити модальне вікно</button>
  <ClientOnly>
    <Teleport to="body">
      <div v-if="open" class="demo modal-demo">
        <p style="margin-bottom:20px">Привіт з модального вікна!</p>
        <button @click="open = false">Закрити</button>
      </div>
    </Teleport>
  </ClientOnly>
</div>

<style>
.modal-demo {
  position: fixed;
  z-index: 999;
  top: 20%;
  left: 50%;
  width: 300px;
  margin-left: -150px;
  background-color: var(--vt-c-bg);
  padding: 30px;
  border-radius: 8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
}
</style>

Ви можете поєднати `<Teleport>` з [`<Transition>`](./transition), щоб створити анімовані модальні вікна - див. [Приклад тут](/examples/#modal).

:::tip
Ціль телепорту `to` має бути вже в DOM, коли монтується компонент `<Teleport>`. В ідеалі це має бути елемент за межами всієї програми Vue. Якщо націлено на інший елемент, відтворений Vue, вам потрібно переконатися, що цей елемент змонтовано перед `<Teleport>`.
:::

## Використання з компонентами {#using-with-components}

`<Teleport>` змінює лише відтворену структуру DOM, але не впливає на логічну ієрархію компонентів. Тобто, якщо `<Teleport>` містить компонент, цей компонент залишатиметься логічним дочірнім компонентом батьківського компонента, що містить `<Teleport>`. Передача реквізитів і випромінювання подій працюватимуть так само.

Це також означає, що ін’єкції від батьківського компонента працюють належним чином і що дочірній компонент буде вкладено під батьківським компонентом у Vue Devtools, а не розміщуватиметься там, куди переміщено фактичний вміст.

## Вимкнення телепорту {#disabling-teleport}

У деяких випадках ми можемо забажати вимкнути `<Teleport>`. Наприклад, ми можемо захотіти відобразити компонент як накладення на великих екранах, але вбудовано на мобільному пристрої. `<Teleport>` підтримує властивість `disabled`, яку можна динамічно перемикати:

```vue-html
<Teleport :disabled="isMobile">
  ...
</Teleport>
```

Де стан `isMobile` можна динамічно оновлювати, виявляючи зміни медіа-запиту.

## Кілька телепортів для однієї цілі {#multiple-teleports-on-the-same-target}

Загальним випадком використання буде повторно використовуваний компонент `<Modal>` з можливістю одночасної активності кількох екземплярів. Для такого сценарію кілька компонентів `<Teleport>` можуть монтувати свій вміст до одного цільового елемента. Порядок буде простим додаванням - пізніші кріплення будуть розташовані після попередніх у цільовому елементі.

Приклад використання:

```vue-html
<Teleport to="#modals">
  <div>А</div>
</Teleport>
<Teleport to="#modals">
  <div>Б</div>
</Teleport>
```

Отриманий результат буде таким:

```html
<div id="modals">
  <div>А</div>
  <div>Б</div>
</div>
```

---

**Пов'язані**

- [Посилання на API `<Teleport>`](/api/built-in-components.html#teleport)
- [Обробка телепортів у SSR](/guide/scaling-up/ssr.html#teleports)
